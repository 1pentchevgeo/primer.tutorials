---
title: "ADD TITLE"
tutorial:
  id: "ADD ID"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: "ADD DESCRIPTION"
---


```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(tidyverse)
library(primer.data)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 
```

```{js change-code, echo = FALSE}
function transfer_code(elem){
  Shiny.setInputValue("js_to_server", elem.previousElementSibling.dataset.label);
  
}

Shiny.addCustomMessageHandler('set-exercise-code', function(x) {
  var el = $(`.tutorial-exercise[data-label="${x.label}"] .tutorial-exercise-code-editor`)
  var exerciseInput = Shiny.inputBindings.bindingNames["tutorial.exerciseInput"].binding
  exerciseInput.setValue(el, {code: x.code});
  Shiny.setInputValue("js_to_server", null);
})
```

```{r observe-transfers, context = "server"}
observeEvent(input$js_to_server, {
  ex_next = input$js_to_server
  str_num = parse_integer(gsub("[^0-9]", "", ex_next)) - 1
  str_head = gsub("[0-9]", "", ex_next)
  ex_prev = paste0(str_head, str_num)
  code <- learnr:::get_exercise_submission(session, ex_prev)$data$code %>% trimws()
  session$sendCustomMessage("set-exercise-code", list(label = ex_next, code = code))
})
```


## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```


<!-- CHECKLIST BEFORE STARTING: -->
<!-- * Load necessary libraries for tutorial in the first code chunk -->
<!-- * Edit yaml at the START OF THIS FILE -->
<!-- * Review: https://ppbds.github.io/primer.tutorials/articles/instructions.html -->


<!-- ## First section (use sentence case) -->
<!-- ### -->


## Download answers

```{r context = "setup"}
submission_ui
```

```{r context = "server"}
submission_server()
```
