---
title: Distributions
tutorial:
  id: distributions
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: Practice working with and understanding distributions.
---

```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(tidyverse)
library(primer.data)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 

# Key Data

set.seed(56)
games <- 1000 

tibble(A_heads = rbinom(n = games, size = 2, prob = 0.5),
       B_heads = rbinom(n = games, size = 4, prob = 0.5)) %>% 
  mutate(A_wins = ifelse(A_heads > B_heads, 1, 0)) %>% 
  summarize(A_chances = mean(A_wins))

rolls <- c(5, 5, 1, 5, 4, 2, 6, 2, 1, 5)
draws <- rnorm(n = 40, mean = 0, sd = 3)
```

```{r copy-code-chunk, child = "../../child_documents/copy_button.Rmd"}
```

```{r info-section, child = "../../child_documents/info_section.Rmd"}
```

<!-- This tutorial should, first, review all the statistics/distributions stuff we learned in Chapters 1 and 2. Doesn't need to be "This came from Chapter 1." Do this first, and then let's talk about other stuff. Feel free to steal from material that is already here.  Tomorrow we will discuss what to do about the material in earlier tutorials. -->


<!-- Add to chapter 5 a tutorial whose sole focus is distributions. First part of this is going slowly through the process by which counts can be turned into percentages. Do this in, at least, five ways. First, with geom_bar() which (I think) does the counting for us. Second, with geom_col(), in which we need to create the counts ourselves. Third with geom_histogram(). Fourth then maybe create a histogram by hand, using cut() and then counting up the elements in each range. -->

<!-- Put the Appendix-distribution questions somewhere here. -->

<!-- Maybe have a section explaining how the distribution of the error term is what motivates the selection of the appropriate family argument in stan_glm(). -->

<!-- CHECKLIST BEFORE STARTING: -->
<!-- * Load necessary libraries for tutorial in the first code chunk -->
<!-- * Edit yaml at the START OF THIS FILE -->
<!-- * Review: https://ppbds.github.io/primer.tutorials/articles/instructions.html -->


<!-- ## First section (use sentence case) -->
<!-- ### -->

## Review

### 

Let's quickly review some of the key concepts and commands which were covered earlier in the *Primer*.


### Exercise 1

create a `tibble`, with one column name is `numbers`, and set numbers equal to the consecutive integers from 1 to 100 inclusive.

```{r review-1, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-1-hint-1, eval = FALSE}
tibble(numbers = 1:100)
```

### 

Remember we use `:` to generate consecutive integers.

### Exercise 2

Pipe down the results, use `summarise()`, create a new column name `Mean`, and set `Mean` equal to the mean of `numbers` using `mean()` function.
```{r review-2, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-2-hint-1, eval = FALSE}
...%>%
  mutate(Mean = mean(...))
```

### 

`summarise()` only includes the column within the function.

### Exercise 3

Within the `summarise()`, add a new argument seperate by comma, `Median`, and set Median equal to the median of `numbers` using median().

```{r review-3, exercise = TRUE}
tibble(numbers = 1:100) %>% 
  summarise(Mean = mean(numbers),
            Median = median(numbers))
```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-3-hint-1, eval = FALSE}

```

### 

As you expected the median and mean is the same.

### Exercise 4

Within the `summarise()`, add a new argument seperate by comma, `sd`, and set sd equal to the standard deviation of `numbers` using sd().Recall standard deviation is measuing how spread out our numbers were.

```{r review-4, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-4-hint-1, eval = FALSE}
tibble(numbers = 1:100) %>% 
  summarise(Mean = mean(...),
            Median = median(...),
            sd = sd(...))
```

### Exercise 5

Within the `summarise()`, add a new argument seperate by comma, `mad`, and set mad equal to the standard deviation of `numbers` using mad(). mad stands for median absolute deviation, essentially is how spread out around the median, note that the number should be different in this case. sd is looking for the square of difference, yet mad is looking at the absolute difference.

```{r review-5, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-5-hint-1, eval = FALSE}
tibble(numbers = 1:100) %>% 
  summarise(Mean = mean(...),
            Median = median(...),
            sd = sd(...),
            mad = mad (...))
```

### Exercise 6

last but not least, within `summarise()`, add `quantile`, use `quantile()`, within set the first arugument to `numbers`, and the second is `prob` which equal to `c(0, 0.5, 1)`
```{r review-6, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-6-hint-1, eval = FALSE}
tibble(numbers = 1:100) %>% 
  summarise(Mean = mean(numbers),
            Median = median(numbers),
            sd = sd(numbers),
            mad = mad (numbers),
            quantile = quantile(numbers , prob = c(0 ,0.5, 1)))
```

### 

It will create another two rows, because quantile has three values in it's column, yet if we want to keep it in one rows, we can add `list()` around `quantile()`, so that we create an list-column for column quantile and keep everything else in 1 row.


### Exercise 7

Start a new pipe using `tibble()`, make the first column name is `ID`, and set it equal to the consecutive integer from 1 to 100, then make the second column which name is `scores`, and set it equal using rep() where value `1350` occurs 20 times, value `1380` occurs 30 times, `1440` occurs 40 times, and `1520` occurs 10 times. Remember to group the `rep()` together using `c()`.

```{r review-7, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-7-hint-1, eval = FALSE}
tibble(ID = ... , scores = c(rep(1350, ...),
                             rep(1380, ...),
                             rep(1440, ...),
                             rep(1520, ...)))
```

### 

### Exercise 8

Now let's say you are a admission officer, and here is the score, now you want to look at the percentile of the score. Use `quantile()`, first argument is scores, the second is `prob`, and set it equal to (.35, .50, .75).
```{r review-8, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-8-hint-1, eval = FALSE}
tibble(ID = 1:100 , scores = c(rep(1350, ...),
                               rep(1380, ...),
                               rep(1440, ...),
                               rep(1520, ...))) %>%
  summarise(percentile = quantile(scores, prob = c(.35, .50, .75)))
```

### 

### Exercise 9

Now let's say instead looking at the percentile you want to randomly pick 10 people from 1350 to 1520 score range to admit.Within `summarise()`, replace `percentile` to `admit`, and set it equal using `sample()`, within `sample()`, the first argument is `scores`, second set `size` equal to 10, and third set `replace` equals `FALSE`.

```{r review-9, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-9-hint-1, eval = FALSE}
tibble(ID = 1:100 , scores = c(rep(1350, ...),
                               rep(1380, ...),
                               rep(1440, ...),
                               rep(1520, ...))) %>%
  summarise( admit = sample(scores, size = ..., replace = ...))
```

### 

Within `sample()`, the first argument represent data source, `size` means how many values we are picking, replace means can we pick the same value twice.


### Exercise 10

Let's now use `runif()` to draw from a uniform distribution. Within `runif()`, set `n` to 5 (the number of draws), `min` to 5, and `max` to 8. 
```{r review-10, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-10-hint-1, eval = FALSE}
runif(n = ..., min = ..., max =...)
```

### 

All the values between min and max have equal chance of being draw.

### Exercise 11

Start a pipe with `tibble()`, set the value `head` equals to `rbinom()`, with the first argument equal to 1000, second argument `size` equal to 1, and the third argument `prob` equal to 0.5.
```{r review-11, exercise = TRUE}

```

```{r review-11-hint-1, eval = FALSE}
tibble(heads = rbinom(n = 1000, size = 1, prob = 0.5))
```

### 

`rbinom()` is used for the scenario where there is only two possible outcome also known as Boolean data type, the coin toss in this case is an example of an Boolean data. Within `rbinom()` the value `n` means how many value is draw, `size` is how many value draws each time, and `prob` is the probability of the outcome.


### Exercise 12

We can give a quick look at what the graph looks like, pipe down the `tibble()` and add `ggplot()`, within `ggplot()`, use aes() and set `x =  heads`, then add the layer geom_bar()`.
```{r review-12, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-12-hint-1, eval = FALSE}
tibble(heads = rbinom(n = 1000, size = 1, prob = 0.5)) %>%
  ggplot(aes(x = heads))+
  geom_histogram(binwidth = 0.5)
```

### 

In this case `geom_col()` won't work because it need an y aesthetic, `geom_bar()` is better than `geom_histogram()` in this scenario because `geom_bar()` automatically fix the binwidth for you, yet `geom_histogram()` requires you to set the binwidth yourself. 

### Exercise 13

Start a pipe with `tibble()`, create an value `Wshoes`, set it equal to `rnorm()`, set the first argument to 100000, the second argument `mean` equal to 8, and third argument `sd` to 1.5. Create another value `Mshoes`, set it equal to `rnorm()`, set the first argument to 100000, the second argument `mean` equal to 10.5, and third argument `sd` to 1.5.
```{r review-13, exercise = TRUE}

```

```{r review-13-hint-1, eval = FALSE}
tibble(Wshoes = rnorm(100000, mean = 8, sd = 1.5),
       Mshoes = rnorm(100000, mean = 10.5, sd = 1.5))
```

### 

Within `rnorm()` the first argument means how many times we are drawing, the second argument `mean` is the mean of the distribution, and the third argument `sd` is the standard deviation for the distribution. Normal distribution is mostly use for things that is very common for most people, but uncommon as it getting far away from that average value. Example could be height, blood pressure, IQ value, Shoe sizes, etc.

### Exercise 14

Let's plot our tibble.  Use ` %>% ` to add the function `pivot_longer()`. Set `cols` to `everything()`, `names_to` to "Distribution", and `values_to` to  "draw".
```{r review-14, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-14-hint-1, eval = FALSE}
... %>% 
    pivot_longer(cols = ...,
                 names_to = ...,
                 values to = ...)
```

### Exercise 15

Continue your pipe with `ggplot()` to map `x` to `draw` and `fill` to Distribution. Add the layer `geom_histogram()`. Within `geom_histogram()`, use `after_stat()` . Inside `aes()`, use `after_stat()` with the argument `y =count/sum(count)` to put percents on the y-axis.
```{r review-15, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-15-hint-1, eval = FALSE}

```

### Exercise 16

Set `alpha` to .5, `bins` to 100, and `position` to "identity" within `geom_histogram()`.

```{r review-16, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r review-16-hint-1, eval = FALSE}
... %>% 
   geom_histogram(aes(y = after_stat(count/sum(count))),
                  alpha =  ..., 
                  bins =  ..., 
                  position = ...)
```

### Exercise 17

Finally, use `labs()` to title your graph "Normal Distributions of shoe sizes". Also label your x-axis "Value" and y-axis "Probability".
```{r review-17, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

Reminder: This is what your plot should look like. 

```{r}
tibble(Wshoes = rnorm(100000, mean = 8, sd = 1.5),
       Mshoes = rnorm(100000, mean = 10.5, sd = 1.5)) %>% 
  pivot_longer(cols = everything(),
               names_to = "Distribution",
               values_to = "draw") %>% 
  ggplot(aes(x = draw, fill = Distribution)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                   alpha = 0.5, 
                   bins = 100, 
                   position = "identity") +
    labs(title = "Normal Distributions of shoe sizes",
         x = "Value",
         y = "Probability")
```

## Distributions

### 

### Exercise 1

Type `rolls` to inspect the vector below.

```{r distributions-1, exercise = TRUE}
rolls <- c(5, 5, 1, 5, 4, 2, 6, 2, 1, 5)
```

### Exercise 2

Great. Now use `table()` with the argument `rolls` to record the number of times each value appears.

```{r distributions-2, exercise = TRUE}

```

```{r distributions-2-hint-1, eval = FALSE}
table(...)
```

### Exercise 3

Now use `rep()` to repeat `rolls` 1,000 times. The first argument to `rep()` should be `rolls`. The second argument should be 1000.


```{r distributions-3, exercise = TRUE}

```

```{r distributions-3-hint-1, eval = FALSE}
rep(..., ...)
```

What does this show us? Well, rather than keeping around a vector of length 10,000, we can just keep 10 values, without losing any information!


### Exercise 4

Let's create a distribution of the possible values from rolling a fair die. To do so, use the `c()` that contain values 1-6. Save your code to an object named `die`.

```{r distributions-4, exercise = TRUE}

```

```{r distributions-4-hint-1, eval = FALSE}
die <- c(...)
```

```{r distributions-4-hint-2, eval = FALSE}
You can use the `:` operator as a shortcut! 
```

### Exercise 5

Let's now complete a single draw from our distribution using `sample()`. Within `sample()`, set the argument `x` to `die` and `size` to 1.

```{r distributions-5, exercise = TRUE}

```

```{r distributions-5-hint-1, eval = FALSE}
sample(x = ..., size = ...)
```

### Exercise 6

Copy/paste your code from above. Adjust the `size` argument to 12. Also add the argument `replace` set to TRUE.

```{r distributions-6, exercise = TRUE}

```

```{r distributions-6-hint-1, eval = FALSE}
Within `sample()`, you should have 3 arguments: x, size, and replace.
```

### Exercise 7

Let's say that before we draw, the probability of rolling a 5 is 0.5, and the probability of rolling any other value is 0.1. Copy/paste your code from above. Set the `prob` argument to a vector that contains each number's probability. 

```{r distributions-7, exercise = TRUE}

```

```{r distributions-7-hint-1, eval = FALSE}
Within c(), there should be six decimals (probability values) that correspond to each number of the die respectively. 
```

```{r distributions-7-hint-2, eval = FALSE}
sample(x = die, 
       size = 10, 
       replace = TRUE, 
       prob = c(..., ..., ..., ... , 0.5, ...))
```

### Exercise 8

Let's now use `runif()` to draw from a uniform distribution. Within `runif()`, set `n` to 5 (the number of draws), `min` to 5, and `max` to 8. 


```{r distributions-8, exercise = TRUE}

```

```{r distributions-8-hint-1, eval = FALSE}
runif(n = ..., min = ..., max =...)
```

### Exercise 9

Let's now use `rbinom` to draw from a binomial distribution like flipping a coin. Within `rbinom()`, set `n` to 1, `size` to 1, and `prob` to .05.  

```{r distributions-9, exercise = TRUE}

```

```{r distributions-9-hint-1, eval = FALSE}
rbinom(... , ..., ....)
```

```{r distributions-9-hint-2, eval = FALSE}
rbinom(n = ..., size = ..., prob = ....)
```

### Exercise 10

Let's put our code in tibble format using `tibble()`. Within `tibble()`, create a column `heads` which is set to the results of `rbinom()`. Within `rbinom()`, set `n` to 50, `size` to 1, and `prob` to .5. 

```{r distributions-10, exercise = TRUE}

```

```{r distributions-10-hint-1, eval = FALSE}
tibble(... = rbinom(..., ..., ...))
```

Notice that we now are drawing from a binomial distribution 50 times! We put the code in tibble format so we can plot it. 

### Exercise 11

Let's now plot our results. Copy/paste your code from above. Use ` %>% ` to add `ggplot()`. Map `heads` to the x-axis. Also add the layer `geom_bar()`.

```{r distributions-11, exercise = TRUE}

```

```{r distributions-11-hint-1, eval = FALSE}
... %>% 
  ggplot(aes(...)) +
    geom_bar() 
```

### Exercise 12

Use `labs()` to title your graph "Flipping a Coin 50 Times". Also label your x-axis "Result" and y-axis "Count".

```{r distributions-12, exercise = TRUE}

```

```{r distributions-12-hint-1, eval = FALSE}
... + 
  labs(title = ...,
       x= ...,
       y = ...)
```

### Exercise 13

Now use `scale_x_continuous()` so the x-axis has `breaks` at 0 and 1. Set the `labels` for the breaks as "Tails" and "Heads", respectively. 


```{r distributions-13, exercise = TRUE}

```

This is what your plot should look like.

```{r}
tibble(heads = rbinom(n = 50, size = 1, prob = 0.5)) %>% 
  ggplot(aes(x = heads)) +
    geom_bar() +
    labs(title = "Flipping a Fair Coin 50 Times",
         x = "Result",
         y = "Count") +
    scale_x_continuous(breaks = c(0, 1),
                       labels = c("Tails", "Heads"))
```

```{r distributions-13-hint-1, eval = FALSE}
Use the c() function for specifying the breaks and labels.
```

```{r distributions-13-hint-2, eval = FALSE}
... + 
  scale_x_continuous(breaks = ...,
                     labels = ...)
```

```{r distributions-13-hint-3, eval = FALSE}
... + 
  scale_x_continuous(breaks = c(..., ...),
                     labels = c(..., ...))
```

### Exercise 14

Let's use `rnorm()` to draw from a normal distribution. Within `rnorm()`, set `n` to 40.

```{r distributions-14, exercise = TRUE}

```

### Exercise 15

Let's now add the arguments `mean` and `sd` to our code above. Set `mean` to  0 and `sd` to 3.

```{r distributions-15, exercise = TRUE}

```

```{r distributions-15-hint-1, eval = FALSE}
rnorm() should now have three arguments: n, mean, and sd.
```

### Exercise 16

 
Save your code above to an object named `draws`.

```{r distributions-16, exercise = TRUE}

```

```{r distributions-16-hint-1, eval = FALSE}
draws <- rnorm(..., ..., ... )
```

### Exercise 17

Use `c()` to find the `mean()`, `sd()`,`median()`, and `mad()` of `draws`.

```{r distributions-17, exercise = TRUE}

```

```{r distributions-17-hint-1, eval = FALSE}
Place mean(), sd(), median(), and mad() all inside c(), each with the argument draws.
```

### Exercise 18

Let's now use `quantile()` to find the values that occupies the 2.5th and 97.5th percentiles. The first argument to `quantile()` should be `draws`. The second argument should set `probs` to a `c()` function that contains values .025 and .975.

```{r distributions-18, exercise = TRUE}


```

```{r distributions-18-hint-1, eval = FALSE}
quantile(..., probs = ...)
```

```{r distributions-18-hint-2, eval = FALSE}
quantile(..., probs = c(..., ..))
```

### Exercise 19

Let's now plot two distributions and their sum. First, let's use `tibble()` to create a column `Normal`, which is set to`rnorm()`. The first argument should be 10000. The second argument should set `mean` to 1. 

```{r distributions-19, exercise = TRUE}


```

```{r distributions-19-hint-1, eval = FALSE}
tibble(... = rnorm(..., ...)
```

```{r distributions-19-hint-2, eval = FALSE}
tibble(... = rnorm(..., mean = ...)
```

### Exercise 20

Copy/paste your code above. Create a second column within `tibble()` named `Uniform`, which is set to a `runif()` statement. The first argument should be 10000. Then set `min` to 2 and `max` to 3.

```{r distributions-20, exercise = TRUE}


```

```{r distributions-20-hint-1, eval = FALSE}
tibble(Normal = rnorm(n, mean = 1),
       Uniform = runif(..., min = ..., max = ...)
```

### Exercise 21

Copy/paste your code above. Create a third column within `tibble()` named `Combined`, which is set to `Normal + Uniform`.

```{r distributions-21, exercise = TRUE}


```

```{r distributions-21-hint-1, eval = FALSE}
tibble(Normal = rnorm(n, mean = 1),
       Uniform = runif(n, min = 2, max = 3),
       Combined = ... + ...)
```

### Exercise 22

Let's plot our tibble. Copy/paste the code above. Use ` %>% ` to add the function `pivot_longer()`. Set `cols` to `everything()`, `names_to` to "Distribution", and `values_to` to  "draw".

```{r distributions-22, exercise = TRUE}


```

```{r distributions-22-hint-1, eval = FALSE}
... %>% 
    pivot_longer(cols = ...,
                 names_to = ...,
                 values to = ...)
```

### Exercise 23

Continue your pipe with `ggplot()` to map `x` to `draw` and `fill` to Distribution. Add the layer `geom_histogram()`. Within `geom_histogram()`, use `after_stat()` . Inside `aes()`, use `after_stat()` with the argument `y =count/sum(count)` to put percents on the y-axis.

```{r distributions-23, exercise = TRUE}


```

```{r distributions-23-hint-1, eval = FALSE}
... %>% 
  ggplot(aes(..., ...)) +
    geom_histogram(aes(...)
```

### Exercise 24

Set `alpha` to .5, `bins` to 100, and `position` to "identity" within `geom_histogram()`.

```{r distributions-24, exercise = TRUE}


```

```{r distributions-24-hint-1, eval = FALSE}
... %>% 
   geom_histogram(aes(y = after_stat(count/sum(count))),
                  alpha =  ..., 
                  bins =  ..., 
                  position = ...)
```

### Exercise 25

Finally, use `labs()` to title your graph "Two Distributions and Their Sum". Also label your x-axis "Value" and y-axis "Probability".

```{r distributions-25, exercise = TRUE}

```

Reminder: This is what your plot should look like. 

```{r}
tibble(Normal = rnorm(100000, mean = 1),
       Uniform = runif(100000, min = 2, max = 3),
       Binomial = rbinom(),
       Combined = Normal + Uniform) %>% 
  pivot_longer(cols = everything(),
               names_to = "Distribution",
               values_to = "draw") %>% 
  ggplot(aes(x = draw, fill = Distribution)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                   alpha = 0.5, 
                   bins = 100, 
                   position = "identity") +
    labs(title = "Two Distributions and Their Sum",
         subtitle = "You can sum distributions just like you sum numbers",
         x = "Value",
         y = "Probability")
```

## Draw Game

### 

Let's imagine that **A** and *B* are both flipping fair coins. **A** flips the coin 2 times. *B* flips the coin 4 times. What is the probability that A flips more heads than B? To estimate the chances that **A** wins, simulate playing the game 1,000 times.

  
### Exercise 1

Let's use `tibble()` to create a column `A_heads`, which is set to an `rbinom()` statement. The first argument should be 1000. The second argument should set `size` to 2 and `prob` to .5. 

```{r draw-game-1, exercise = TRUE}

```

```{r draw-game-1-hint-1, eval = FALSE}
tibble(A_heads = rbinom(..., ..., ...)
```

### Exercise 2

Copy/paste your code above. Create a second column within `tibble()` named `B_heads`, which is set to a `rbinom()` statement. The first argument should be 1000. Then, set `size` to 4 and `prob` to .5.

```{r draw-game-2, exercise = TRUE}

```

```{r draw-game-2-hint-1, eval = FALSE}
tibble(A_heads = rbinom(n = games, size = 3, prob = 0.5),
       B_heads = rbinom(..., ..., ...))
```

### Exercise 3

Copy/paste your code from above. Use `mutate()` to create a column `A_wins`, which is set to an `ifelse()` statement. The first argument to `ifelse()` should set `A_heads` greater than `B_heads`. The second argument should be 1, and the third argument should be 3.  

```{r draw-game-3, exercise = TRUE}

```

```{r draw-game-3-hint-1, eval = FALSE}
... %>% 
   mutate(... = ifelse(... > ..., 1, 0))
```

### Exercise 4

Finally, use `summarize()` to set `A_chances` to the `mean()` of `A_wins`.

```{r draw-game-4, exercise = TRUE}

```

```{r draw-game-4-hint-1, eval = FALSE}
... %>% 
  summarize(... = mean(...))
```

```{r download-answers, child = "../../child_documents/download_answers.Rmd"}
```
