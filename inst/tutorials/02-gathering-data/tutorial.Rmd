---
title: "Gathering-Data"
tutorial:
  id: "02-gathering-data"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: "Chapter 2 Gathering Data"
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
library(primer.tutorials)
knitr::opts_chunk$set(echo = FALSE, message = FALSE)
options(tutorial.exercise.timelimit = 60, tutorial.storage="local") 

# Dealing with external files in tutorials is confusing! The biggest problem is
# figuring out when things will be evaluated and where. There is some discussion
# here: https://rstudio.github.io/learnr/. It certainly seems that setup chunks
# are not evaluated until Run Code is pressed on the Exercise chunk.

# We need to get the example file into the working area for each question. I
# initially had this material in its own R code chunk. But then the function was
# not available when the tutorial was run from the Tutorial Pane. Why? For
# safety, any objects which you always want around should be created here, the
# main set-up chunk.

# For some usage, you want to interact with the file in its main location,
# without copying it over. For that purpose, you need the path to where the
# package is installed.

# I find it weird that, even though this works and we have access to `www` in
# all the code below, we get a warning when running the tutorial:

# Warning: Error in paste0: object 'www' not found

# Since everything works, this must be a weird evaluation timing issue . . .

# Is there a way to force the deletion of any previous work, whenever you
# install a new version of the package? There seem to be at least two kinds of
# work that stay on. First, the answers which you have already given, which can
# be removed by hitting the Start Over button. Second, the html file itself
# seems to (often) be a previous version, rather than the lattest.


```






## CSV Files
###

We begin by learning how to use `read_csv()` to read in CSV files. "CSV" stands for comma-separate values, meaning that the variable names and data values are separated by commas in the file.

### Exercise 1

```{r ex-1-setup}
file.copy(paste0(system.file("www/", package = "primer.tutorials"), 
                 "test_1.csv"), ".")
```

Consider the contents of the `test_1.csv` file. 

```{r, comment=''}
cat(readLines(paste0(system.file("www/", package = "primer.tutorials"), 
                     "test_1.csv")), sep = "\n")
```

Write code for reading this file in to R.


```{r ex-1, exercise=TRUE}

```

```{r ex-1-hint, eval=FALSE}
Use `read_csv()` and set the `file` argument to `test_1.csv`.
```

The result when your code is run should look like this:

```{r}
read_csv(paste0(system.file("www/", package = "primer.tutorials"), 
                "test_1.csv"),
         col_types = cols(a = col_double(),
                          b = col_double(),
                          c = col_double()))
```

The rest of the exercises in this tutorial are like this one. We aren't creating any new R objects. We are just reading in data from different files and looking at the resulting object, which will almost always be a tibble.




