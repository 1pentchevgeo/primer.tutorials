---
title: "Distill"
tutorial:
  id: "distill"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: "Distill Tutorial"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 

library(learnr)
library(primer.tutorials)
library(ggthemes)
library(png)
library(grid)
library(tidyverse)
library(distill)
```

<!-- Take ownership of the distill tutorial. Teach about weird vector error. Nosa is highly capable so this is DONE.-->

<!-- Switch proof of work questions (if easy to do!) from Terminal to Console. Example: ls -> list.files(); cat -> readLines() %>% head() -->

<!-- AG: This was pretty annoying, but I think that I advocated for something a bit too extreme. It's much simpler both for me and for the reader (plus the reader gets more terminal experience) if I just instruct them how to open the shell and put their commands in there. That way they can just switch between the screens, making it easier for people on computers or with 2 monitors. It also means that they type less. -->

## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```

## Creating a website 
###

We will go over how to make a Distill project in RStudio. We will also configure it for hosting on GitHub pages. 

### Exercise 1

In your browser, log in to your Github account. Navigate to your Repositories section. Create a new repository named `distill-tutorial` by pressing the green button. Give the repo a name and description of your choice and select the option to add a README file. 

###

You will be redirected to the Github page for your new repo. Click the green Code button above where the repo's files are displayed. Copy the link that appears in the dropdown box. 

###

Click File, then Open Project. Navigate to your current R project folder and open any project there other than the one you are currently in by clicking on its folder. We are doing this so that we can make the new project for your Git directory in a new window. If we tried to make the project in this Window, you would have to close the Tutorial. You will have to navigate back and forth between these windows for the remainder of the tutorial.

###

In the other R Studio instance that you just opened. Go to File and the New Project. Select Version Control and then Git. Paste the URL to clone the Github repo into the repository URL box. The name should be automatically filled in based on the name of the repository. In the bottom right corner, select the option to open this project in a new session. 

###

In the Terminal of the other R Studio instance, run `pwd` to confirm that you are in the correct directory, i.e. a directory named `distill_tutorial` in the place you normally keep R projects. Copy and paste the command and result below.

> Since you are going to be running a large amount of terminal commands, it may be a good idea to open the shell and do the commands in there. Just go to the Tools menu in RStudio and select the Shell option to open the shell. This is basically the Terminal tab but in another window so that you can easily hide it or organize it.

```{r distill-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

In the Terminal of the other R Studio instance, run `ls -a` to view a list of all the files in the directory. You should see a `README.md` which we made when we created the github repo. You should also see two hidden files, `.gitignore` and `.git`. 

###

```{r distill-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

In the Console of the other R Studio instance, load the `usethis` package. Then run the command `git_sitrep()`. Copy and paste the output below. 

```{r distill-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`git_sitrep()` gives information on the status of Git on your computer and current project. In the "Git repo for current project" section, make sure that the active `usethis` project is set to the correct directory on your computer. 

###

In the Github remote configuration section, make sure that origin is set equal to your github directory and that you have "can push" in parentheses. 

Below is an example of the output of `git_sitrep()` for a working Git repo. Yours should be similar. Do not worry if token scopes differ. 

```{r sitrep.png}
file <- system.file("images/sitrep.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

### Exercise 4

To set up and manage the files needed to create a website with R Markdown files, we use the package `distill`. In the Console of the other R Studio instance, use the `library()` function to load the package. 

###

To confirm that you have successfully installed and loaded the package run the function `search()` in the console of the other R Studio instance. Copy and paste the output below. 

```{r distill-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

The output of `search()` is a vector of packages in use. Make sure that "package.distill" is one of the items in the vector. 

### Exercise 5

To add the files necessary to create a website, we use the distill function `create_website()` in the console of **the other R Studio instance**. Set the first argument, `dir` to `"."`. This tells Distill that we want the files needed for the website in our present working directory. Set the second argument, `title` to the string, "Title of My Final Project". Set the third argument, `gh_pages` to `TRUE`. This sets up the website to automatically be compatible for hosting with Github Pages. 

###

Executing this command opens a file called `index.Rmd`, which is the code for the home page of your website. At the top of that document, the title field should contain the title you specified in the `create_website()` function. In addition to this document, the function has created several other new files. In the Terminal of the other R Studio instance, run `ls -a` to see a list of all the files in the working directory. Copy and paste the result.
 
```{r distill-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```


###

You should see an `about.Rmd` which, like `index.Rmd` contains the code for your site's about page. 

###

You should see a `_site.yml` sign which contains the instructions for the organization of the different pages of your website. 

###

You should also see a `docs` directory. This is where all the files necessary for the final deploying of your website, including the knitted HTMLs, live. Github Pages looks in the `docs` directory for the components necessary to build the site. 

### Exercise 6

In the same group of panels, where the Git and Environment tabs are, you should also see a Build tab.

###

If you do not, close the RStudio instance for the website (you do not have to close the instance in which you are completing the tutorial).

###

Open the project again using through by usin the File Tab in the Tutorial R Instance. You should now see a Build tab.

### Exercise 7

In `index.Rmd` (in the other R Studio instance), replace the example description with the string "This is where I will describe my final project." Knit this file. This opens a preview of what this page of the website will look like.

###

In the Terminal of the other R Studio instance, run `head index.Rmd`. This command prints the first ten lines which should include the text of your new description. Copy and paste the command below. 

```{r distill-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

When you knit a file, you preview how only that page will look on the website. You cannot navigate the website because you have only built one page, not the whole thing. 

### Exercise 8

Navigate to the Build panel. Hit the "Build Website" button in the top left corner of that panel. This will create a preview of your website with all the pages built. At this point, you should only have a Home page and an About page. You can navigate between these two by clicking the links in the top panel, just as you would on a normal website. 

###

Building the website rebuilds all the documents necessary to deploy the site, which live in your `docs` directory. In the Terminal of the other R Studio instance, run `ls -l docs`.  Copy and paste the output below.

```{r distill-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

All these files should have very recent and identical times in the date last modified column.

### Exercise 9

Open the `.gitignore` file. In the file, on a new line, add `*.Rproj` to prevent your .Rproj file from being uploaded to Git. Save the file. After it is saved, the file ending in `.Rproj` should disappear from the Git tab. If it has not, use the refresh button in the top right corner of the panel. 

###

In the Terminal of the other R Studio instance, run `cat .gitignore`. This should return the contents of your edited `.gitignore` file. Copy and paste the output below.

```{r distill-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 10

In the Git tab, you should have several uncommited changes. Select all of these and press commit. In the window that pops up, add the commit message "initial commit". Press the commit button. Then press the push button, the green arrow at the top right corner of the screen. When the push is finished, you should have a message that ends with "HEAD -> main". 

###

In the Terminal of the other R Studio instance, run `git log`. Copy and paste the output below. 

```{r distill-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

The output is a list of your commits. You should see two, the one at the top being the one you just made. Check to see that the time is that of your most recent commit. 

### Exercise 11

In your browser, go to Github. Navigate to the page for your repo, `distill_tutorial` Check to see that the new files we created are now on Github. Navigate to settings, the last item in the same menu where Code (which should be highlighted since you are on that page) is. On the left sidebar menu, click on Pages, which should be towards the bottom. 

###

"None" should be the selected option in the Source section of Github pages. Click on the dropdown menu and choose "main". 

<!-- AG: Is there something wrong with this? I can't knit it or run it, but it works with the other files. It's kind of weird, but it also just might be me screwing up the merge or something. It might also be because the png isn't published in the package yet, but I don't think that's how it works. -->

```{r github_pages.png}
file <- system.file("images/github_pages.png",
                    package = "primer.tutorials")


img <- readPNG(file)
grid.raster(img)
```

###

A field will appear in which "/root" is the selected option. Click on the dropdown menu and change this to "/docs".  This tells github to build your website from your /docs directory. 

```{r github_pages2.png}
file <- system.file("images/github_pages2.png",
                    package = "primer.tutorials")

img <- readPNG(file)
grid.raster(img)
```

###

Press Save. When you do so, Github will begin to build the website. When it is finished, you will be able to access the site at the link which the page provides. The building process should take fewer than 3 minutes. 

## Adding visualizations
###

Putting plots in Distill is just like putting plots in regular R Markdowns. 

Let's add the following plot to your website's home page. 

```{r make-car-plot}
car_plot <- mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")

car_plot
```


### Exercise 1 

Start a pipe with the data set `mtcars`. Do this and the rest of the pipe in the box provided below. 

```{r plot-1, exercise = TRUE}

```

```{r plot-1-hint, eval = FALSE}
mtcars
```

### Exercise 2

Select the columns `mpg` and `wt`. 

```{r plot-2, exercise = TRUE}

```

```{r plot-2-hint, eval = FALSE}
mtcars %>% 
  select(..., ...)
```

###

`wt` is weight of the car in 1000s of lbs.

### Exercise 3

Create a scatterplot with `wt` on the x-axis and `mpg` on the y-axis.

```{r plot-3, exercise = TRUE}

```

```{r plot-3-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point()
```

### Exercise 4

Add the layer `geom_smooth()`. Set method to "lm", formula to `y ~ x`, and se to `FALSE`.

```{r plot-4, exercise = TRUE}

```

```{r plot-4-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "...", formula = y ~ x, se = ...)
```

### Exercise 5

Adjust the feel of your graph by adding the later `theme_clean()`

```{r plot-5, exercise = TRUE}

```

```{r plot-5-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean()
```

### Exercise 6

Use `labs` to add an appropriate title, subtitle, axes labels, and caption to your graph. 

```{r plot-6, exercise = TRUE}

```

```{r plot-6-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "...",
       subtitle = "...", 
       x = "...", 
       y = "...", 
       caption = "...")
```

###

Reminder: Your plot should look something like this

```{r show-car-plot}
car_plot
```

### Exercise 7 

In the other R Studio instance, open index.Rmd, which should be in the same directory as the .Rproj for your website. In the setup chunk, load the library `tidyverse` and the library `ggthemes`. 

###

In the Terminal, run `tail index.Rmd`. Copy and paste the output below. 

```{r plot-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

The output, which prints the last ten lines of your document, should include the addition of the libraries. 

###

Code that works during your R session will not work when your website is knitted if you have not loaded the required libraries into the document. 

### Exercise 8 

Create a new code chunk in `index.Rmd`. At the very top of the chunk, there is a heading `{r}`. Add a space after the `r` and assign a name to your code chunk e.g. `{r car-plot}`. Save the changes to index.Rmd.  

###

Knit the .Rmd. In the R Markdown tab, you will see a report of the knitting process. Copy and paste everything from the red "Rendering" message to the 100% in the box below. 

```{r plot-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

One of the last items should be your code chunk with its label given. Here is an example:

```{r rmarkdown.png}
file <- system.file("images/rmarkdown.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

###

Assigning names to code chunks helps keeps you organized and helps others understand your code. You cannot assign the same name to multiple code chunks. 

### Exercise 9 

Copy and paste your code for from Exercise 6 into the `car-plot` code chunk. Save the changes to index.Rmd.

###

In the Terminal, run `tail -n 20 index.Rmd`. Copy and paste the output below. 

```{r plot-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This command prints the last twenty lines of the document `index.Rmd`. 

### Exercise 10

Go to the Build Tab, click "Build Website". Check to make sure your new graph is on the home page. 

###

Go the Git tab, then commit and push your new changes to Github. Include a descriptive commit message, e.g. "Added plot to home page".

###

After pushing, your new changes will be automatically reflected on your Github Pages site. This should take fewer than three minutes. 

## Adding text
###

R Markdowns regularly allow for a combination of plain text and R code. This same feature allows you to add plain text to your website. 

### Exercise 1

Open `about.Rmd`, which should be in the same directory as your .Rproj for the website. In the white space below the setup chunk, add the following: `## About Me`. Knit the Rmd. 

###

In the Terminal, run `cat about.Rmd`. Copy and paste the result below. 

```{r text-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Number signs in front of text makes the text into a header. The organization of headers is determined by the number of number signs. Fewer number signs make higher level headers, i.e. bigger text. More number signs make lower level headers, i.e. smaller text. Notice that distill has automatically included a line underneath this header. 

### Exercise 2

Compose a short description of yourself. Write it below the header. Include your name and school. You may also include interests of yours. Write until the end of the line, i.e. do not use the Enter key to wrap text. When you are finished, knit the Rmd. 

###

In the Terminal, run `tail about.Rmd`. Copy and paste the result below. 

```{r text-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3 

Let's bold your name. In the description you have already written surround your name with two asteriks on each side, e.g. "My name is **Your Name**, and I...". When you are finished knit the Rmd. 

### 

In the Terminal, run `grep -F "**" about.Rmd`. Copy and paste the result below. 

```{r text-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

The option `-F` allows you to use grep to search for characters that would otherwise be used in regular expressions. 

### Exercise 4

Add a new header with two number signs, "About the Project". Underneath the header, include a title and description of your project. Knit the .Rmd.

###

In the Terminal, run `cat -n about.Rmd`. Copy and paste the result below. 

```{r text-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 5

Let's italicize the title of your project. Surround the title of your project with one asterik on each side, e.g. My project, *The Title of My Project*, explores..."

###

In the Terminal, run `grep "*" about.Rmd`. Copy and paste the result below. 

```{r text-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6 

Add a new header, "Goals", on a lower level than the previous using three number signs. 

###

Let's created a bulleted list of at least two goals of your project. To create a bulleted list begin each line with an asterisk. When you want to add a new item to the list, use enter to create a new line and add another asterisk. Knit the Rmd.

### 

In the Terminal, run `tail about.Rmd`. Copy and paste the result below. 

```{r text-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 7

For at least one goal in your bulleted list, add a possible challenge or complication of this goal. To do so, add the text on the line underneath the goal, use tab to indent, and add a `+` before the text. 

###

In the Terminal, run `grep "+" about.Rmd`. Copy and paste the result below. 

```{r text-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

To create a numbered list, use numbers followed by periods, i.e. 1., instead of asterisks. Sub-items for numbered lists are created in the same way as they are for bulleted lists. 

### Exercise 8 

Oftentimes you want to wrap text before the default margin. For example, add Preceptor's common saying: '"This is data science"' (include the double quotes, not the single quotes). Then on the next line add "~ Preceptor" (do not include the quotes). Knit the Rmd. 

###

Run `grep  "~" docs/about.html`. Copy and paste the result. 

```{r text-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

This will not work. The quote and its source will be on the same line. 

### Exercise 9 

To create a manual line break, add two spaces after the final quote in '"This is data science"'. Knit the rmd. 

###

In the Terminal, run `grep "data science" docs/about.html`. Copy and paste the result. 

```{r text-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Note that the tilde will disappear and create an indent. This is an automatic feature of an R Markdown document. To print the tilde in the knitted document, enclose it within single quotes. 

### Exercise 10 

Let's create text which is also a hyperlink to the bootcamp website. Enclose the text "Kane's Free High School Data Science Bootcamp" in brackets `[]`. Then, without a space intervening, add parentheses `()` which enclose a link to the bootcamp website: https://bootcamp.davidkane.info. Knit the Rmd. 

###

In the Terminal, run `grep info docs/about.html`. Copy and paste the result. 

```{r text-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 11

Go to the Build Tab, click "Build Website". Check to make the about page has been updated. 

###

Go the Git tab, then commit and push your new changes to Github. Include a descriptive commit message, e.g. "Added info to about page".

###

After pushing, your new changes will be automatically reflected on your Github Pages site. This should take fewer than three minutes. 

## Adding new pages
###

Here you will learn how to create new pages for your website. You will learn how to make these accessible to users of your website through the navigation bar. 

### Exercise 1

In the Console for the project with your website, run `create_article("sources.Rmd")`. This opens an R Markdown called sources.Rmd. 

###

You cannot make a new .Rmd from the File Tab. This will cause your website to break. You must use the `create_article()` command. Without the `create_article()` command, the necessary line `output: distill::distill_article` does not appear. 

###

The error that you get when you do not use `create_article()` looks like this. If this happens, delete the problematic .Rmd and use `create_article()` to re-create it.

```{r build_error}
file <- system.file("images/build_error.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

###

In the Terminal, run the command `ls sources.Rmd`. Copy and paste the result.

```{r pages-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Terminal should return sources.Rmd. 

### Exercise 2

Change the title from "Untitled" to "Sources". Change the description to "An overview of sources used in my project". 

Observe that the heading of this new file contains much more information than index.Rmd and about.Rmd. Delete the author and description fields from the .Rmd so that the file more closely resembles the other two pages on our website.  Knit the .Rmd.

###

In the Termainal, run the command `grep author sources.Rmd`. Copy and paste the result below. This should return an empty line. 

```{r pages-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

After the setup chunk add the following sentence: "This is where I will describe what sources I used and why I chose them. I may also discuss any broad challenges I faced while finding sources." Knit the .Rmd. 

###

In the Terminal, run `tail sources.Rmd`. Copy and paste the result.

```{r pages-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

**Do not** delete the default text which invites people to learn more about Distill. On your own you may do so, but do not during this exercise because it will be used later. 

### Exercise 4 

Go to the Build pane and press "Build Website". Your new page will not appear. 

### 

Open the `_site.yml` file. You should see a line that says `navbar`. Below this line you should see the line `right`. Below this is the code that creates the header links for the navigation bar on your site. 

###

On a new line after `href: about.html`, add the line `- text: "Sources"`. Then on the line below, add `href: sources.html`. Try to make the formatting and spacing match the preceding items in the navbar. When you are done, save `_site.yml`.

###

In the Terminal, run `grep href site.yml`. Copy and paste the result. 

```{r pages-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

This should return three lines. Including your new line addition of sources.html. All these html files live in the `docs` folder. `output_dir` at the top of the `yml` controls the location where htmls are knit to. 

### 

When you save `_site.yml` the site is automatically knit and opened. However, this is not the same thing as building the website. Close this. 

###

The code `right` before the navbar items puts the navigation bar on the right side of your site. This can be changed to `left`. 

### Exercise 5 

Go to the Build pane and press Build Website. Now you should see and be able to click through all three tabs. 

###

In the Build tab, the last red message before Output created should let you know that your new page was being rendered. Copy and paste this message. 

```{r pages-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6

In the `_site.yml` file, delete the two lines of code that create the header and link for the Sources page. 

###

In the Terminal, use `rm` to remove sources.Rmd

### 

In the Console, run `create_article()` twice to create two new files, "source_A.Rmd" and "source_B.Rmd".  

###

In the Terminal, run `ls source*`. 

```{r pages-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This should return both source_A.Rmd and source_B.Rmd

### Exercise 7 

Change the tile of the documents from Untitled to "Source A" and "Source B"

###

Change the description of the documents to "Detailed notes for Source A" and "Detailed notes for Source B". The `|` symbol which comes by default in the description field add more space between the document title and the description. 

###

Replace "Nora Jones" in the author field with your name. Delete the three subsequent fields after author. Knit the two .Rmds. 

###

**Do not** delete the Distill credits. You may do so on your own website, but we will use this text later in the tutorial. 

In the Terminal, run the command `head source_A.Rmd source_B.Rmd`. Copy and paste the result below. 

```{r pages-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 8 

Let's create a dropdown menu called "Sources" through which one could visit either the page for Source A or Source B. 

### 

Add the code `- text: "Sources"`. Type this so that it is line with the existing `- text` lines. 

###

Underneath that, add the code `menu:`. Type this so that it is line with the exisiting `href` lines. Save the `_site.yml` file. 

###

Go the build pane and hit Build the Website. The site should now have a new tab called "Sources", but nothing will happen when you click on it because it contains no links.

###

In the Terminal, run `cat _site.yml`. Copy and paste the result below.

```{r pages-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 9

Open `_site.yml`. On the line underneath `menu` indent and then add the code `- text: "Source A"`. Then directly underneath that add the line `href: source_A.html`. Type it so that `text` and `href` are in line with one another. Since you have indented, they will not be in line with any of the previous.

###

Underneath that, indent and then add the line `-text: "Source B"`. Then directly underneath that add the line `href: source_B.html`. Type it so that `text` and `href` are in line with one another and with those words for source A. 

### 

Go the build pane and hit Build the Website. The site should now have a tab called "Sources" with an arrow. When you click on it you should be given the option to naviagate either to the Source A page or the Source B page. 

###

In the Terminal, run `cat _site.yml`. Copy and paste the result below.

```{r pages-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 10


Go the Git tab, then commit and push your new changes to Github. Include a descriptive commit message, e.g. "Added source pages".

###

After pushing, your new changes will be automatically reflected on your Github Pages site. This should take fewer than three minutes. 

## Using a .rds
###

An `.rds` file allows us to save any R object in a file. When we load in an .RDS, we avoid having to run the code required to make the object and simply have access to the output. This is very convenient for functions that take a long time to run, such as API requests. It can also be convenient for drawing plots as well.

### Exercise 1 

Go to File > New File and then click R Script. Press save in the left of the top panel. Name the file make-car-plot. The .R suffix will be added automatically. 

###

In the Terminal, run `ls`. Make sure that make-car-plot.R is one of these files.

```{r rds-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

Though an R script will use the libraries you already have loaded, it is good practice to include these at the top of the document. 

###

Load the library `tidyverse`. 

### 

In the Terminal, run `grep library make-car-plot.R`. 

```{r rds-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

Copy the code in the `car-plot` chunk in index.Rmd. Paste it into `make-car-plot.R`. Assign it to an object named `car_plot`. 

###

To run the code in the R script, place your cursor at the end of the line (or pipe) you want to run and press Ctrl (Mac: Command) + Enter. Save the R script. 

###

In the Terminal, run `cat -n make-car-plot.R`. Copy and paste the result here. 

```{r rds-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

Under the pasted code, add the function `write_rds()`. The first argument is the R object which you want to store in an .rds file, `car_plot`. The second argument is the name of the file you want to create, "car-plot.rds". 

###

Place your cursor at the end of the `write_rds()` function and press Ctrl (Mac: Command)  + Enter. You should now see the .rds file. 

### 

The R script that makes the .rds is not necessary for the building of your website. However, it is useful to include it in the directory that is uploaded to Git so that people can see the code that creates the R object. 

###

In the Terminal, run `ls car*`. This should return a list which contains only "car-plot.rds". Copy and paste the result here. 

```{r rds-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 5

Return to `index.Rmd`. Delete the code that makes `car_plot`. 

###

Add the function `read_rds()`. Set its argument to the name of the file you want to read, `car-plot.rds`. Assign this output to an R object called `car_plot`. Below this, type the object `car_plot` to print the plot saved in the .rds. Knit the .Rmd.

###

In the Terminal, run `grep rds index.Rmd`. Copy and paste the result. 

```{r rds-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

You should now see the same output as you had before when you had the code to make the plot. 

### 

This is a reminder that any R object can be made into an .rds file. It is most convenient for functions which take a long time to run and so will slow down your website's loading time, e.g. API requests. 


## Tables and images
###

The `knitr` package gives the tools to embed both tables and pictures into our website. There are also other packages which can render tables with different features. 

### Exercise 1 

Start a pipe with the `mtcars` data set. Arrange this by `mpg` in ascending order. 

```{r tables-1, exercise = TRUE}

```

```{r tables-1-hint, eval = FALSE}
mtcars %>% 
  arrange(mpg)
```

###

Notice that the first column, the name of the cars, does not have a column name. This is because it is not technically a column, but a **row name**. This is not the case with most of the data sets we work with (only data frames, not tibbles support it). 

### Exercise 2

In the other R Studio session, open index.Rmd. Create a new code chunk, name it table-1, and copy and paste your code from exercise 1 within it. Print the table and knit the document. 

###

In the Terminal, run `tail index.Rmd`. Copy and paste the result below. 

```{r tables-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This table looks similar to a console output. It could look a lot better. 

### Exercise 3

Let's add a table using the function `kable()`. It is part of the `knitr` package.  First, save the code above to an object called `table`. 

###

In the setup chunk, load the library `knitr`. Save `index.Rmd`

###

In the Terminal, run `grep library index.Rmd`. Copy and paste the result here.


```{r tables-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This should return all the lines in which you load packages, including the most recent, `knitr`. 

### Exercise 4

Create a new code chunk named `table-2`.

###

In that chunk run `kable(table)`. Knit the .Rmd. 

###

In the Terminal, run `tail index.Rmd`. 

```{r tables-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`kable` produces a compact and well-formatted tibble. 

### Exercise 5

Let's add a table using the function `paged_table()`. It is part of the `rmarkdown`. 

###

In the setup chunk, load the library `rmarkdown`. Save `index.Rmd`

###

In the Terminal, run `grep library index.Rmd`. Copy and paste the result here.


```{r tables-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This should return all the lines in which you load packages, including the most recent, `rmarkdown`. 

###

### Exercise 6

Create a new code chunk named `table-3`.

###

In that chunk run `paged_table(table)`. Knit the .Rmd. 

###

In the Terminal, run `tail index.Rmd`. 

```{r tables-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`paged_table` produces a table similar to the R Markdown table output. Its chief advantage is that it allows for the table to have pages and take up less space. 

### Exercise 7

The table you just cannot display all of its columns in one window and so has a navigation arrow for the columns. There are two reasons for this: first, default maximum of columns printed with `paged_tables` is 10; second, the window in which Distill renders the table is too small. 

###

Within your `paged_table` function, add `options(cols.print = 12)` as the second argument. Knit the .Rmd. 

###

In the Terminal, run `grep options index.Rmd`. Copy and paste the result below. 

```{r tables-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This tibble is even worse. YThe navigation arrow is still present and you need a horizantal scroller on the bottom to see it. 

### Exercise 8

To increase the width of the window in which Distill renders the graph, we can add options the setup chunk. After the chunk name add a comma and then the code `layout = "l-body-outset"`. 

###

In the Terminal run the command `grep "r " index.Rmd`. This should return a list of all your code chunk headers, including the most recent one. Copy and paste the result below.

```{r tables-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Now you should have a table which displays all twelve columns in one window. 

###

For an even wider window for rendering objects in Distill, use `layout = "l-page"`. The layout command can be used for any object that Distill renders, including plots. 

###

The command `datatable()` in the package `DT` allows for a paged table with even more user interaction. It allows the user to sort the table by variables and to search through the table. Here is an image of `mtcars` using the `DT` package function:

```{r datatable.png}
file <- system.file("images/datatable.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

### Exercise 9

Let's add a table using the function `gt` in te package `gt`. It is similar to `kable()` in look, but allows for more customization, like a title, subtitle, and caption. 

###

In the setup chunk, load the library `gt`. Save `index.Rmd`

###

In the Terminal, run `grep library index.Rmd`. Copy and paste the result here.


```{r tables-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

This should return all the lines in which you load packages, including the most recent, `gt`. 

###

### Exercise 10

Create a new code chunk named `table-4`.

###

In that chunk run `gt(table)`. Knit the .Rmd. 

###

In the Terminal, run `tail index.Rmd`. 

```{r tables-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Without further customization, this table looks similar to the tibble we made using `kable()`. 

### Exercise 11

Note that this table has not printed `rownames`. 

###

Within `gt`, set the argument `rownames_to_stub` to `TRUE`. Knit the .Rmd

###

In the Terminal, run `grep TRUE index.Rmd`. 

```{r tables-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

There are a few other methods for handling rownames in `gt`. Most likely, you will not have to deal with data with rownnames during your final project. 

### Exercise 12

Use a pipe to add the function `tab_header()`. Set the `title` argument to "1974 Automobiles". Set the `subtitle` argument to "The least fuel efficient cars are the heaviest". Knit the .Rmd

### 

In the Terminal  run `tail index.Rmd`. Copy and paste the result below. 

```{r tables-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 13

Let's bold the title. To do so, still within the quotation marks, surround the text 1974 Authomobiles with two asterisks. Then enclose the entire string in the function `md()`, like so, title = `md("**1974 Automobiles**")`. Knit the .Rmd

```{r tables-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

`md` stands for markdown and allows the same formatting syntax as used in markdown to be used in the string. You can also italicize using this function and only one asterisk on each side.  

### Exercise 14

Continue your pipe with `tab_source_note()`. The function `tab_source_note()` allows you to add a caption to the graph. Make the argument of the function "Source: Henderson and Velleman (1981)". Knit the .Rmd

###

In the Terminal, run `grep Henderson index.Rmd`. Copy and paste the result below. This should return both the code for this caption as well as the code for the caption on your plot. 

```{r tables-14}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 15

Continue your pipe with `tab_spanner()`. The function `tab_spanner()` allows you to add a heading to a group of variables. Set the first argument `label` equal to "Variable Group 1". Set the second argument `columns` equal to a vector of the first five columns, `c(mpg, cyl, disp, hp, drat)`. Knit the .Rmd. 

###

In the Terminal, run `tail index.Rmd`. Copy and paste the result below. 

```{r tables-15}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`gt` has many more features including footnotes and even fill color based on data values. You can find the full documentation [here](https://cran.r-project.org/web/packages/gt/gt.pdf). 

### Exercise 16

To add an image to a Distill website, we can use the `include_graphics()` function which is part of the `knitr` package.

###

First, let's make an image. In the car-plot code chunk, use the function `ggsave()` to make a PNG image of the plot you just made. The first argument is the name of the file you want to save the image to, "car-plot.png". The next argument is `plot`, set that equal to `car_plot`. After you run this function, you should see a file named "car-plot.png" appear in your files pane. 

###

In the Terminal, run `ls *png`. Copy and paste the result below. 

```{r tables-16}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 17 

Any images you want to include on your website must be located in your project directory and uploaded to Git. While referring to images elsewhere on your computer may work when you knit and build on your computer, it will not work on other people's devices.

###

It is often convenient to have a dedicated `images` directory within your main project directory. 

###

In the Terminal, run `pwd` to confirm you are in the main project directory. Then run `mkdir images`. Use the `mv` command to move `car-plot.png` into the `images` directory. Hint: `mv car-plot.png images`

###

In the Terminal, run `ls images`. This list should only contain one item, car-plot.png.

```{r tables-17}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 18 

Create a new code chunk at the bottom of your document named image. 

###

Add the `include_graphics()` function. Its argument is the path of the picture you want to include, `images/car-plot.png`. Knit the .Rmd. You should see an image of your plot at the bottom of the page. 

### 

In the Terminal, run `grep graphics index.Rmd`. Copy paste the result.

```{r tables-18}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

## Adding citations
###

Distill and R Markdown make it easy to add cite others and create an accessible citation with which others can cite you. We will create our citations in the Bibtex format, which is recognized by text files with the suffix .bib. 

### Exercise 1

In the terminal, run `pwd` to confirm that you are still in the `distill-tutorial` directory. Then, run `touch bibliography.bib`. 

```{r cite-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

Open the file `bibliography.bib`. 

###

Copy and paste the following Bibtex citation (for a non-existent work) into your document:
@article{jones2018distill,
author = {Jones, Nora}, 
title = {Distill for R Markdown},
journal = {Journal of Data Science Software}, 
year = {2018},
note = {https://rstudio.github.io/distill},
doi = {10.23915/distill.00010}
}

###

Save `bibliography.bib`

###

The label that follows the `@` identifies the medium of the work cited. The first item after the open parentheses is the tag; it can be whatever you want and you will use it as a shorthand to refer to the citation in your code. 

###

The following fields contain the information that make up your citation. Fields will vary from work to work. However, they must be standard Bibtex fields to be included within your citation. 

Note that the content of these fields is enclosed within curly brackets. Each field is separated by a comma.

###

Note that the `note` field does not appear by default within the citation. For this citation, the `doi` link takes us to the work's online location. 

###

For a fuller list of Bibtex categotries and fields see [here](http://bib-it.sourceforge.net/help/fieldsAndEntryTypes.php#note)

###

In the Terminal, run `cat -n bibliography.bib`. Copy and paste the result. 

```{r cite-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

Below the previous, copy and paste the following Bibtex citation, for *Primer.data*, into `bibliography.bib`:
@manual{primerdata,
author = {Kane, David}, 
title = {Primer.data},
year = {2020},
howpublished = {\url{https://github.com/PPBDS/primer.data}}
}

###

Save `bibliography.bib`

###

We found the information we used to cite this data in the [CITATION document](https://github.com/PPBDS/primer.data/blob/master/inst/CITATION) included in the Primer.data package. Check to see if data sets which you use have such documentation before citing them. 

###

Most data sets should be cited in the category `@misc`. `@manual` was specified in the citation document document for *Primer.data*.

###

Note that the tag for this citation `primerdata` bears no resemblance in format to the tag for the previous citation. 

###

`primer.data` does not have a doi. If we want the URL to appear in the citation, we can use the `howpublished` field. For the URL to have proper formatting, you must enclose it with one set of curly brackets and then with another which contains `\url` after its opening bracket. 

###

In the Terminal, run `cat -n bibliography.bib`. Copy and paste the result. 

```{r cite-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

Open `source_A.Rmd`. At the bottom of the header, on the line immediately after output, add the following: `bibliography: bibliography.bib`. 

### 

This tells where to find the citation information for any references we make in this document. 

### 

Knit the .Rmd. It should be unchanged. 

###

In the Terminal, run `grep bibliography source_A.Rmd`. Copy and paste the result.

```{r cite-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 5

Two lines below the setup chunk, add the following plain text: "Source A was Primer.data. It was flawless." Save source_A.Rmd

###

In the Terminal, run `grep flawless source_A.Rmd`. Copy and paste the result.

```{r cite-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6

Immediately after the sentence we just added. Add `[@primerdata]`.

###

Brackets which enclose a citation tag preceeded by an `@` lets R Markdown know that you have made a reference to the work in the current page.  Knit the .Rmd. 

###

At the bottom you should the information from your Bibtex made into a more familiar citation format.

###

In the Terminal, run the command `grep "@" source_A.Rmd` Copy and paste the result. 

```{r cite-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 7 

After the last line of the Distill credits. Add `[@jones2018distill]`. 

###

Knit the .Rmd. Notice that the references are listed in alphabetical order despite the order that they were mentioned in. Notice also that the places where we mentioned the references do not appear in the document. 

```{r cite-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
``` 

## Download answers

```{r context = "setup"}
submission_ui
```

```{r context = "server"}
submission_server()
```

