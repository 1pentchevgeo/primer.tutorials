---
title: "Terminal"
tutorial:
  id: "terminal"
output:
  learnr::tutorial:
      progressive: true
      allow_skip: true
runtime: shiny_prerendered
description: "Terminal Tutorial"
---

```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(tidyverse)
library(png)
library(grid)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 
```

<!-- The plan: Where I am: Added prompts to introduction. Made a rough Tour 1 which taught paths and the relevant shortcuts lone cd, .., ~/, [will add ./] Should add tab complete. For Tour 2 I am thinking that I will introduce options for ls mv (introducing cp alongside) and perhaps find (though this maybe should go in Tour 1), -->
<!-- Wildcards. Tour 3: Viewing, editing, txts. Tour 4: grep -->

<!-- * Add 15 or so questions to terminal tutorial. Switch Gov-1005 to my-class. ls -a, ls -l, cat, cd .., cd ~, cd . (which does nothing). explain how cp and then rm is the same as mv. How to use . with mv? Use echo and > to put text in a file.  -->

<!-- * Explain grep. Use wildcards (talk about this tomorrow). -->

<!-- * Explain the home directory. cd ~ -->

<!-- * Flexible on commands in UNIX Work Bench. Include them? No? Some of them? head? cat? -->

<!-- * Change to 4 sections. Last three are like Tour I, Tour II and Tour III. -->

<!-- * Use envirnoment variables like $R_HOME to look at interesting locations with weird files that we are sure will be there. -->



## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```

## Introduction
###

The Terminal pane is next to the Console pane in the lower left portion of RStudio. We use the Console pane to talk to R. We use the Terminal pane to talk directly with the computer. Sadly, the Console and the Terminal speak different languages.

### Exercise 1

The Terminal has a string of characters ending in a $ before your cursor, called the **prompt**. After a command has been executed, a prompt will be generated on a new line to let you know that Terminal is ready for a new command. Hit return two times to see what happens to the prompt. Copy and paste the three lines here.

```{r term-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

Let's figure out where we are. To see your current location within your computer, type the command `pwd` (**p**resent **w**orking **d**irectory) in the Terminal. Hitting return runs the command. Copy and paste all commands and results associated with this exercise, as you will do for all the following exercises.  

```{r term-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```




###

In a given working directory, Terminal assumes that all files and directories, unless otherwise specified, are within that directory.

Notice how the last directory (folder) in the **path** is included in the prompt.

Your pasted code should look something like:

```{r}
file <- paste0(system.file("images/", 
                           package = "primer.tutorials"),
               "pwd.png")
img <- readPNG(file)
grid.raster(img)
```




### Exercise 3

Let's see a **l**i**s**t of what's in our working directory. Run `ls`. Copy and paste the work.

```{r term-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

Let's create a file called `my.txt`. Run`touch my.txt`. Run `ls` to confirm that the new file exists inside the working directory. Copy and paste the work.

```{r term-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`touch` creates an empty file. 

### Exercise 5

Let's **m**ake a **dir**ectory called `my-class`. Run `mkdir my-class`. Run `ls` to confirm that the new directory exists inside the working directory. Copy and paste the work.
 
```{r term-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

### Exercise 6

Let's rename `my.txt` to  `fake.txt`.  Run `mv my.txt fake.txt`. Copy and paste the work. 

```{r term-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```


###

`mv` stands for **m**o**v**e. The first argument is the place we want to move from, the second argument is the place we want to move to. Here the places have the same location, but different names. We will move things with `mv` later. 

Your pasted code should look something like:
```{r}
file <- paste0(system.file("images/", 
                           package = "primer.tutorials"),
               "mv.png")
img <- readPNG(file)
grid.raster(img)
```


## Paths
###

You will practice using paths both inside and outside the working directory. You will learn a few shorthands to make this easier. 

### Exercise 1

By default, the Terminal in RStudio starts with a working directory which is the same as the folder in which the current project resides, i.e., the folder with the .Rproj file in it. Run `pwd` to see your working directory. 

```{r term1-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

By default, the files pane (bottom right corner) in RStudio shows the contents of this directory. Towards the top, you will see a path of directories on your computer starting from a home icon. This should match the latter part of the path given from `pwd`. 

### Exercise 2

Let's **c**hange the working **d**irectory to `my-class`. Run `cd my-class`.  Run `pwd` to confirm that you have changed the working directory. Copy and paste the work.

```{r term1-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

Let's make a directory within `my-class` called `lessons`. Run `mk-dir lessons`.

```{r term1-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

Let's make a directory within `lessons` called `wildcards`. Run `mk-dir lessons/wildcards`. Run `ls lessons` to check to see if `wildcards` exists inside.

```{r term1-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

We could not simply name the folder we wanted to create because then it would be created directly inside our working directory. To refer to a location that is not directly inside the present working directory, we need to use a path, which describes the location directory by directory. The path above is called a **relative path**, because it still assumes the working directory as its starting point. 

### Exercise 5

Let's change our working directory to `wildcards`. Run `cd lessons/widlcards`. 

```{r term1-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6

Let's make a file inside `wildcards`, named `2019-01-20.txt`. Run `touch 2019-01-20.txt`

```{r term1-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 7

Make four more files inside `wildcards`, named `2019-02-19.txt` `2020-01-19.txt` `2020-02-18.txt`, and, `does-not-belong`.

```{r term1-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Excercise 8

Let's go back to `lessons`. Run `cd ..` to go to the folder immediately above the working directory. Run `pwd` to confirm that you are in the right directory. Create a folder called `tbd`.

```{r term1-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`..` is a shorthand for the directory immediately above the  working directory. `.` is a shorthand for the working directory. 

### Excercise 9

It would be slow to have to use `cd ..` every time we wanted to go anywhere outside of our working directory. To refer to a specific folder outside of the working directory, we need to use an **absolute path**. An absolute path, as opposed to the relative paths we have been using, describes a place on your computer without respect to a working directory. An absolute path begins with the root directory, which is represented by a lone `/`. This is what `pwd` returns. 

###

Let's go back to our original working directory. Go to Exercise 2 to find the absolute path of the original working directory. Run `cd` with this as an argument. For example: `cd /Users/user-name/Desktop/sample/original-working-directory`. 

```{r term1-ex-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 11

Let's move the file `does-not-belong` so that it is directly inside of `my-class`. Run `mv my-class/lessons/wildcards/does-not-belong my-class/does-not-belong`. Remember the first argument is the place where we want to move the file from, the second argument is the place where we want to move the file to. 

```{r term1-ex-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

If we are moving a file or directory without changing the name, we do not need to add the name in the second argument. `mv my-class/lessons/wildcards/does-not-belong my-class` is equivalent to what we have done above. 

### Exercise 12

Let's move the directory `tbd` to our present working directory. Run `mv my-class/lessons/tbd tbd`

```{r term1-ex-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

### Exercise 13

Run `cd` alone. Run `pwd` to check where you are. This is called the **home directory**, which contains all a user's files. Run `ls` to see what is inside your home directory.


```{r term1-ex-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 14

Change the working directory back to your original home directory. You can again use the absolute path from the `pwd` in Exercise 1. 

```{r term1-ex-14}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Since the original working directory is within the home directory, the full absolute path was not necessary. We could have omitted the user-name and everything before it. 


### Exercise 15

Let's change the working directory to a directory of your choice within the home directory.  Because the home directory is used in the absolute path of so many files, its path (`/Users/user-name/`) can be written with the shorthand `~/`.  Run, for example, `cd ~/Desktop`.

```{r term1-ex-15}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 16

Change back to the original working directory, using the shorthand for the home directory to write its absolute path. 

```{r term1-ex-16}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Good work.


## Options
###

You will learn what options are and use them for functions you already know. You will be given the power to undo. 

#### Exercise 1

Add another file to the `my-class` directory, named `.my-hidden.txt` (make sure to include the `.`). 

```{r term2-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

Run `ls` to check if the file is inside `my-class`. If you did the previous exercise correctly, you will **not** see the new file. This is because we prefixed the name with the `.`,  which hid the file from normal view. These files live all over your computer. Run `ls -a my-class`. Using the **option** `-a`, you should be able to see **a**ll the files in `my-class`.

```{r term2-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Options are regularly preceded by a `-` and come before the argument. 

You can turn on your ability to see hidden files in the R Studio files pane (bottom right corner) by clicking the "More" button towards the top.

### Exercise 3

We have already gone over a few shorthands that represent paths. The shortcut `$R_HOME` represents the path to a folder of set-up files that R has installed on your computer. Type and enter `$R_HOME$` alone to make sure we are telling you the truth. Then change your working directory to `$R_HOME`. 

```{r term2-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

We have never been in this directory before. Let's try to get situated by running `ls`. You should see several unfamiliar items. It is hard to proceed since we do not even know whether we are looking at files or folders. Let's use `ls -l`, so that we can see more information in a **l**ong list. The names are now in the last column and file type is in the first: if the string in the first column begins  `d` it is a **d**irectory; if it begins with  `-` it is a file; if it begins with `l` it is a **l**ink to another file on the computer.

```{r term2-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. The middle columns give, from left to right, the number of files, author, permission, file size in bytes, date last modified.

### Exercise 5

Use `ls -l` to take a look at the `doc` folder. 

```{r term2-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6

Let's make a copy of the `AUTHORS` file. Use the command `cp`, whose syntax is identical to `mv`. Then, without changing directories, use `ls` and `ls -a` to confirm that `my-class` still has all three files and that there is still a copy of `AUTHORS` in `doc`.

```{r term2-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Like `mv`, `cp` can change a file name. Like `mv`, if the destination file name is omitted, `cp` will retain the same name by default. 

### Exercise 7

Return to our original working directory. Use the absolute path from Exercise 1 if needed.

```{r term2-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 8

Try to make a copy of the directory `my-class/lessons/wildcards`, named `wildcards-b`, in the lessons folder. You will get an error informing you that the thing you tried to copy was a directory. Run the same command using the option `-r`.

```{r term2-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 9

Let's **r**e**m**ove `my-class/does-not-belong`. Run `rm my-class/does-not-belong`.

```{r term2-ex-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

**Be careful** with the rm command in Terminal. Unlike moving files to Trash, it is not reversible. If you delete certain things, it could cause damage to programs or your computer. 

### Exercise 10

Try to remove the `tbd` directory. You will get an error informing you that thing you tried to copy was a directory. Run the same command using option `-r`. 

```{r term2-ex-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. 

## Submit

```{r context = "setup"}
submission_ui
```

```{r context = "server"}
submission_server()
```

