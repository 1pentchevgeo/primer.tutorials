---
title: "Terminal"
tutorial:
  id: "terminal"
output:
  learnr::tutorial:
      progressive: true
      allow_skip: true
runtime: shiny_prerendered
description: "Terminal Tutorial"
---

```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(tidyverse)
library(png)
library(grid)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 
```

## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```

## Introduction
###

The Terminal pane is next to the Console pane in the lower left portion of RStudio. We use the Console pane to talk to R. We use the Terminal pane to talk directly with the computer. Sadly, the Console and the Terminal speak different languages.

### Excercise 1

The fresh terminal should have a string characters ending in a $ before your cursor. This is called the **prompt** and we type all commands after it. After a command has been executed, a prompt will be generated on a new line to let you know terminal is ready for a new command. Hit return a few times to see what happens to the prompt. Copy/paste the result.

```{r term-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 2

Let's figure out where we are. To see your current location, type `pwd` (**p**resent **w**orking **d**irectory) in the Terminal. Hit return, and copy/paste both the line on which you typed the command and the line below it. Notice how  the last directory (folder) in the **path** is included in the prompt.


```{r term-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

This is the standard manner in which you will answer tutorial questions which use the command line. Your pasted answer should look like this:

```{r}
file <- paste0(system.file("images/", 
                           package = "primer.tutorials"),
               "pwd.png")
img <- readPNG(file)
grid.raster(img)
```

(You can include or not the prompt which follows the response to your command at your own discretion.)

Again, you paste in both the line with the command you issued and the result of that command. If the question asked you to issue two commands, then copy/paste them both. 

### Exercise 3

Type `ls` (list) in the terminal and hit return to see all the items that are located in the directory in which you are currently located. 

```{r term-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 4

Let's make a folder called `my-class`. Type the command `mkdir my-class` and hit return. Now type `ls` to see your newly created folder! 
 
```{r term-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 5

Type in the command `cd my-class` in order to **c**hange **d**irectories into the directory which we just created. There should not be anything in this directory. Type `ls` to be sure. Notice the change to the prompt after changing directories.

```{r term-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6

Let's now create a file. Type in `touch my.txt`and hit return. Now type `ls`. `touch` creates the file but does nothing else.

```{r term-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 7

Let's move  `my.txt` to the `my-class` folder. This is done with the `mv` command. (`mv` stands for **m**o**v**e.) First, type `ls` to confirm the existence of `text.txt`. Second, type `mv my.txt my-class/my.txt`. The first **argument** in our `mv` command identifies where my.txt is, a lone file in our pwd. The second text identifies where we want my.txt to be, inside of the `my-class` folder in our pwd. 

```{r term-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Your pasted code should look something like:

```{r}
file <- paste0(system.file("images/", 
                           package = "primer.tutorials"),
               "mv.png")
img <- readPNG(file)
grid.raster(img)
```

### Exercise 8

`ls` can take an argument. Let's make sure that `my.txt` is in the my-class folder. Run `ls my-class` and make sure my.txt is inside. 

```{r term-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 4))
```

Nice!

## Tour 1: Paths
###

How do we work in directories outside of the present working directory?

### Excercise 1

When working in R Studio, the default pwd will be the one in which your R project (.Rproj) is located. In the introduction we changed directories with the command `cd` and an **argument** which specified the directory inside the pwd to which we wanted to change. Type `cd` alone, without an argument. This will bring us to the computer's home directory, the directory that contains all the files on the computer that belong to the current user.

```{r term1-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

`cd` without an argument will bring us to the home directory. Notice that the prompt has shortened to only the name of the user and the $. The home directory always ends  the prompt.

### Excercise 2 

Let's to the my-class directory we made earlier. First, use `ls` to view the folders in the home directory. You should see familiar folder names that are used to organize files on most computers (Desktop, Downloads, etc.). Copy/paste the result. 

```{r term1-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Do you know which one contains the folder where you save your R projects?

### Excercise 3

Let's explore more of the home directory. Let's look inside the Desktop folder. Instead of typing out the full command, type `ls D` and press `Tab` (you may have to press twice). Terminal should return all the folders in your home directory that begin with a D. Now, type `ls De` and press Tab. Terminal should complete the line for you, since on most computers `Desktop` is the only folder beginning with De. Hit return to look at the contents of the Desktop.   

```{r term1-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. Tab autocomplete can be used whenever we are working with files and directories to help find a file out of a long list or to save time when typing long file names. Keep practicing with it as you go through the excercises. 

### Excercise 4

Run `ls Desktop` if you know your R project folder is somewhere in the Desktop. This will list all the items in the Desktop folder.  Do this for the folder where your R project folder is located. Copy/paste the result.

```{r term1-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Do you know which one contains the folder where you save your R projects?

### Excercise 5

Continue to look for your R project folder. If the folder is inside the folder whose contents we listed in exercise 3, type `ls Desktop/r-project-folder-name`. This should return a list of folders containing all your  R projects. If your R project folder is nested inside of another folder within the folder from exercise 3, run `ls Desktop/next-folder-name` to find the name of the R project folder and then run `ls Desktop/next-folder-name/r-project-folder-name`. If your R project folder is nested inside of still more folders, repeat these steps for each folder until you have a list of folders containing all your  R projects.

```{r term1-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. It is a good thing to have an idea of where things are saved. Have you been using Tab autocomplete?

### Excercise 6

You should now have a path starting with a folder in your home directory and ending with the folder with your R projects. Find the name of the R project we were in. You will add this directory to your path and use this as an argument for `cd`. The command should look something like this `cd Desktop/r-project-folder-name/r-project-name`. Notice that this path will be the same as the progression of folders you see at the top of the RStudio file pane (file pane is in the lower-right corner). 

```{r term1-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

We are back at our original starting point. Check to see that the prompt has changed. 

### Excercise 7

Now, change to the `my-class` directory just as we did in the introduction. 

```{r term1-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work.

### Excercise 8

Though they are of different lengths, the arguments of `cd` in Exercise 5 and Exercise 6 are both paths for directories within our pwd and so we call them relative paths. Both paths have an assumed starting point of the pwd. In Exercise 1, we used the default setting for `cd` to change to a directory outside of the pwd. The shorthand `.` is another way to represent your pwd. The shorthand `..` represents the directory one above your pwd (the folder which contains it). Change your directory back to the folder for the R-project, by running `cd ..`. 

```{r term1-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```
 
The prompt should be the same as it was before Exercise 6. 

### Excercise 9

To refer to a directory outside the pwd that is neither the home directory nor the directory immediately above, we must use the absolute path, which gives the file path from the root directory. The root directory is represented by an initial `/`. Let's move my.txt to the Desktop folder. The first argument will be the relative path for my.txt. The second argument will be the absolute path of the new location, `/Users/user-name/Desktop/my.txt`. 

```{r term1-ex-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. Note that we could have written the path for the new location without `/my.txt`. `mv` will create a file of the same name in the destination folder by default. 

### Excercise 10

We have now moved the file outside are pwd. To check if it is working we can use `ls` as before, but we have to use the absolute path. As you can guess, the path `/Users/user-name/...` will be frequently used and so the shorthand `~/...` can be typed instead. Run `ls ~/Desktop` to check whether made it to the desktop. 

```{r term1-ex-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Was it there? Good work.

### Excercise 11

We forgot to move the `my-class` folder with our file. Though we will move folders later, for now move `my.txt` back to the `my-class` folder in the home directory. While we are moving the file, let's change the name of the file to `fake.txt` The first argument should be the absolute path for its current location in the desktop, and the second argument should be the relative path with the new name: `mv ~/Desktop/my.txt my-class/fake.txt`

```{r term1-ex-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. Moving something from a place outside the home directory like Desktop into the home directory where our R project lives is a common command, and you may want to change the filename while you are moving it. 

### Excercise 12

Let's check if the file made it. Though we can use relative paths when working within our pwd, the shorthand `./` represents the absolute path from the root directory to our pwd (recall the shorthand for our pwd was `.`). Type `ls ./my-class` to try this out.

```{r term1-ex-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work.

## Tour 2: Options
###

#### Excercise 1 

Let's make add another file to our `my-class` directory. We will name it `.my-hidden.txt` (make sure to include the `.`). Instead of making the file in the pwd with `touch` and then moving it to `my-class`, let's specify the location in our argument. Run `touch my-class/.my-hidden.txt`.

```{r term2-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work.

### Excercise 2

Now run `ls my-class`. If you did the previous excercise correctly, you will **not** see the new file. This is because we added the `.` before it which hid the file from normal view. These files live all over your computer. We can use an **option** to see these files using `ls`. Options for terminal commands are preceded by a `-`.  Run `ls -a my-class`. With the option -a, you should be able to see **a**ll the files in `my-class`.

```{r term2-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. 

### Excercise 3

We have already gone over a few shorthands that represent paths. The shortcut `$R_HOME` represents the path to a folder of set-up files that R has installed on your computer. Type and enter `$R_HOME$` alone to make sure we are telling you the truth. Then change your pwd to `$R_HOME`. 

```{r term2-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. 

### Excercise 4

We have never been in this file before. Let's try to get situated by running `ls`. You should see several unfamiliar items. It is hard to proceed since we do not even know whether we are looking at files or folders. Let's use `ls -l`, so that we can see more information in a **l**ong list. File type is in the first column, if the string in the first column begins with `d` it is a **d**irectory, if it begins with a `-` it is a file. You will also notice one string in this column that begins with `l` this is a **l**ink to another file on the computer, as is also suggested by its name, which you can see in the last column. 

```{r term2-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. The middle columns give the number of files, author, permission, file size in bytes, date last modified, in that order.

### Excercise 5

Nice, let's look at the doc folder. Though we should expect documents to be inside, run `ls -l doc`, so that we can see whether the items are files or directories.

```{r term2-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. Our guess was right, only mostly files in this directory. 

### Excercise 6

We have now moved several files from one place on your computer to another. However, often we want to have a file in a new place without removing the file from its old place. For this, there is a command very similar to `mv`, `cp`, which stands for **c**opy **p**aste. Let's make a copy of `AUTHORS` and move it to our `my-class` folder, using the same syntax as we would for `mv`. Without changing directories, use `ls -a` to confirm that `my-class` has all three files.

```{r term2-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. 

### Excercise 7 

In Tour 1, we did not know how to move whole directories To do this, we can use the commands we already know, `mv` and `cp`. Use `mv` to move the `my-class` directory into the doc directory. 

```{r term2-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

Good work. 


## Submit

```{r context = "setup"}
submission_ui
```

```{r context = "server"}
submission_server()
```

