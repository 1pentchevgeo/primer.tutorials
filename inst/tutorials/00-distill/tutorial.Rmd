---
title: "Distill"
tutorial:
  id: "distill"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: "Distill Tutorial"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 

library(learnr)
library(primer.tutorials)
library(ggthemes)
library(png)
library(grid)
library(tidyverse)
library(distill)
```

## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```

<!-- Specify the name of every file/repo/whatever that they create. Something like "tutorial_repo". Not "example"! Or "test"!. But, in the repo itself, files can have simple names like "example.Rmd" because they can't conflict with anything else. -->



## Creating a Website 
###

We will go over how to make a project in Distill and get it set up with GitHub pages. 

### Exercise 1

In your browser, log in to your Github account. Navigate to your Repositories section. Create a new repository by pressing the green button. Give the repo a name and description of your choice and select the option to add a README file. 

###

You will be redirected to the Github page for your new repo. Click the green Code button above where the repo's files are displayed. Copy the link that appears in the dropdown box. 

###

Open RStudio. Click File, then New Project. Select Version Control and then Git. Paste the URL to clone the Github repo into the repository URL box. The name should be automatically filled in based on the name of the repository. In the bottom right corner, select the option to open this project in a new session. 

###

In the Terminal, run `pwd` to confirm that you are in the correct directory, i.e. a directory named after your Github repo in the place you normally keep R projects. Copy and paste the command and result below.

```{r distill-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Your answer should look something like this, although the start of the path will be different but the last directory on the path should be "/tutorial_repo".

````
Davids-MBP-10:tutorial_repo davidkane$ pwd
/Users/davidkane/Desktop/projects/tutorial_repo
````

### Exercise 2

In the Terminal, run `ls -a` to view a list of all the files in the directory. You should see a `README.md` which we made when we created the github repo. You should also see two hidden files, `.gitignore` and `.git`. 

###

```{r distill-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3

In the Console, load the `usethis` package. Then run the command `git_sitrep()`. Copy and paste the output below. 

```{r distill-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

`git_sitrep()` gives information on the status of Git on your computer and current project. In the "Git repo for current project" section, make sure that the active `usethis` project is set to the correct directory on your computer. 

###

In the Github remote configuration section, make sure that origin is set equal to your github directory and that you have "can push" in parentheses. 

Below is an example of the output of `git_sitrep()` for a working Git repo. Yours should be similar. Do not worry if token scopes differ. 

```{r sitrep.png}
file <- system.file("images/sitrep.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

### Exercise 4

To set up and manage the files needed to create a website with R Markdown files, we use the package `distill`. In your console run `install.packages("distill")`. Then use the `library()` function to load the package. 

###

To confirm that you have successfully installed and loaded the package run the function `search()` in your console. Copy and paste the output below. 

```{r distill-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

The output of `search()` is a vector of packages in use. Make sure that "package.distill" is one of the items in the vector. 

### Exercise 5

To add the files necessary to create a website, we use the distill function `create_website()`. Set the first argument, `dir` to `"."`. This tells Distill that we want the files needed for the website in our present working directory. Set the second argument, `title` to a string with what you want to title your website. Set the third argument, `gh_pages` to `TRUE`. This sets up the website to automatically be compatible for hosting with Github Pages. 

###

Executing this command opens a file called `index.Rmd`, which is the code for the home page of your website. At the top of that document, the title field should contain the title you specified in the `create_website()` function. In addition to this document, the function has created several other new files. In the Terminal, run `ls -a` to see a list of all the files in the working directory. Copy and paste the result.
 
```{r distill-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

You should see an `about.Rmd` which, like `index.Rmd` contains the code for your site's about page. 

###

You should see a `_site.yml` sign which contains the instructions for the organization of the different pages of your website. 

###

You should also see a `docs` directory. This is where all the files necessary for the final deploying of your website, including the knitted HTMLs, live. Github Pages looks in the `docs` directory for the components necessary to build the site. 

###

In the same group of panels, where the Git and Environment tabs are, you should also see a Build tab. If you do not, close the RStudio Session for the website (you do not have to close the session in which you are completing the tutorial) and open it again. You should now see a Build tab.

### Exercise 6

In `index.Rmd` replace the example description with a short description of your final project. Knit this file. This opens a preview of what this page of the website will look like.

###

In the Terminal, run `head index.Rmd`. This command prints the first ten lines which should include the text of your new description. Copy and paste the command below. 

```{r distill-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

When you knit a file, you preview how only that page will look on the website. You cannot navigate the website because you have only built one page, not the whole thing. 

### Exercise 7 

Navigate to the Build panel. Hit the "Build Wesbite" button in the top left corner of that panel. This will create a preview of your website with all the pages built. At this point, you should only have a Home page and an About page. You can navigate between these two by clicking the links in the top panel, just as you would on a normal website. 

###

Building the website, rebuilds all the documents necessary to deploy the site, which live in your `docs` directory. In the Terminal, run `ls -l docs`.  Copy and paste the output below.

```{r distill-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

All these files should have very recent and identical times in the date last modified column.

### Exercise 8

Open the `.gitignore` file. In the file, on a new line, add `*.Rproj` to prevent your .Rproj file from being uploaded to Git. Save the file. After it is saved, `.gitignore` should disappear from the Git tab. If it has not, use the refresh button in the top right corner of the panel. 

###

In the Terminal, run `cat .gitignore`. This should return the contents of your edited `.gitignore` file. Copy and paste the output below.

```{r distill-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 9 

In the Git tab, you should have several uncommited changes. Select all of these and press commit. In the window that pops up, add the commit message "initial commit". Press the commit button. Then press the push button, the green arrow at the top right corner of the screen. When the push is finished, you should have a message that ends with "HEAD -> main". 

###

In the Terminal, run `git log`. Copy and paste the output below. 

```{r distill-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

The output is a list of your commits. You should see two, the one at the top being the one you just made. Check to see that the time is that of your most recent commit. 

### Exercise 10

In your browser, go to Github. Navigate to the page for your repo. Check to see that the new files we created are now on Github. Navigate to settings, the last item in the same menu where Code (which should be highlighted since you are on that page) is. On the left sidebar menu, click on Pages, which should be towards the bottom. 

###

"None" should be the selected option in the Source section of Github pages. Click on the dropdown menu and choose "main". 

###

A field will appear in which "/root" is the selected option. Click on the dropdown menu and change this to "/docs".  This tells github to build your website from your /docs directory. 

###

Press Save. When you do so, Github will begin to build the website. When it is finished, you will be able to access the site at the link which the page provides. The building process should take fewer than 3 minutes. 

## Adding Visualizations
###

Putting plots in Distill is just like putting plots in regular RMarkdowns. 

Let's add the following plot to your website's home page. 

```{r make-car-plot}
car_plot <- mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")

car_plot
```


### Exercise 1 

Start a pipe with the data set `mtcars`. Do this in the box provided below. 

```{r plot-1, exercise = TRUE}

```

```{r plot-1-hint, eval = FALSE}
mtcars
```

### Exercise 2

Select the columns `mpg` and `wt`

```{r plot-2, exercise = TRUE}

```

```{r plot-2-hint, eval = FALSE}
mtcars %>% 
  select(..., ...)
```

###

`wt` is weight of the car in 1000s of lbs.

### Exercise 3

Create a scatterplot with `wt` on the x-axis and `mpg` on the y-axis.

```{r plot-3, exercise = TRUE}

```

```{r plot-3-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point()
```

### Exercise 4

Add the layer `geom_smooth()`. Set method to "lm", formula to `y ~ x`, and se to `FALSE`.

```{r plot-4, exercise = TRUE}

```

```{r plot-4-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "...", formula = y ~ x, se = ...)
```

### Exercise 5

Adjust the feel of your graph by adding the later `theme_clean()`

```{r plot-5, exercise = TRUE}

```

```{r plot-5-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean()
```

### Exercise 6

Use `labs` to add an appropriate title, subtitle, axes labels, and caption to your graph. 

```{r plot-6, exercise = TRUE}

```

```{r plot-6-hint, eval = FALSE}
mtcars %>% 
  select(mpg, wt) %>% 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "...",
       subtitle = "...", 
       x = "...", 
       y = "...", 
       caption = "...")
```

###

Reminder: Your plot should look something like this

```{r show-car-plot}
car_plot
```

### Exercise 7 

Open index.Rmd, which should be in the same directory as the .Rproj for your website. In the setup chunk, load the library `tidyverse` and the library `ggthemes`. 

###

In the Terminal, run `tail index.Rmd`. Copy and paste the output below. 

```{r plot-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

The output, which prints the last ten lines of your document, should include the addition of the libraries. 

###

Code that works during your R session will not work when your website is knitted if you have not loaded the required libraries into the document. 

### Exercise 8 

Create a new code chunk in `index.Rmd`. At the very top of the chunk, there is an `r` in `{r}`. Add a space after the R and assign a name to your code chunk e.g. `{r car-plot}`. Save the changes to index.Rmd.  

###

Knit the Rmd. In the R Markdown tab, you will see a report of the knitting process. Copy and paste everything from the red "Rendering" message to the 100% in the box below. 

```{r plot-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

One of the last items should be your code chunk with its label given. Here is an example:

```{r rmarkdown.png}
file <- system.file("images/rmarkdown.png", 
                    package = "primer.tutorials")
img <- readPNG(file)
grid.raster(img)
```

###

Assigning names to code chunks helps keeps you organized and helps others understand your code. You cannot assign the same name to multiple code chunks. 

### Exercise 9 

Copy and paste your code for from Exercise 6 into the `car-plot` code chunk. Save the changes to index.Rmd.

###

In the Terminal, run `tail -n 20 index.Rmd`. Copy and paste the output below. 

```{r plot-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 10

Go to the Build Tab, click "Build Website". Check to make sure your new graph is on the home page. 

###

Go the Git tab, committing and pushing your new changes to Github. Include a descriptive commit message, e.g. "Added plot to home page".

###

After pushing, your new changes will be automatically reflected on your Github Pages site. This should take fewer than three minutes. 

## Adding Text
###

R Markdowns regularly allow for a combination of plain text and R code. This same feature allows you to add plain text to your website. 

### Exercise 1

Open `about.Rmd`, which should be in the same directory as your .Rproj for the website. In the white space below the setup chunk, add the following: `## About Me`. Knit the Rmd. 

###

In the Terminal, run `cat about.Rmd`. Copy and paste the result below. 

```{r text-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Number signs in front of text makes the text into a header. The organization of headers is determined by the number of number signs. Fewer number signs make higher level headers, i.e. bigger text. More number signs make lower level headers, i.e. smaller text. Notice that distill has automatically included a line underneath this header. 

### Exercise 2

Compose a short description of yourself. Write it below the header. Include your name and school. You may also include interests of yours. Write until the end of the line, i.e. do not use the Enter key to wrap text. When you are finished, knit the Rmd. 

###

In the Terminal, run `tail about.Rmd`. Copy and paste the result below. 

```{r text-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 3 

Let's bold your name. In the description you have already written surround your name with two asteriks on each side, e.g. "My name is **Your Name**, and I...". When you are finished knit the Rmd. 

### 

In the Terminal, run `grep -F "**" about.Rmd`. Copy and paste the result below. 

```{r text-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

The option `-F` allows you to use grep to search for special characters. 

### Exercise 4

Add a new header with two number signs, "About the Project". Underneath the header, include a title and description of your project. Knit the .Rmd.

###

In the Terminal, run `cat -n about.Rmd`. Copy and paste the result below. 

```{r text-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 5

Let's italicize the title of your project. Surround the title of your project with one asterik on each side, e.g. My project, *The Title of My Project*, explores..."

###

In the Terminal, run `grep -F "*" about.Rmd`. Copy and paste the result below. 

```{r text-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 6 

Add a new header, "Goals", on a lower level than the previous using three number signs. 

###

Let's created a bulleted list of at least two goals of your project. To create a bulleted list begin each line with an asterisk. When you want to add a new item to the list, use enter to create a new line and add another asterisk. Knit the Rmd.

### 

In the Terminal, run `tails about.Rmd`. Copy and paste the result below. 

```{r text-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 7

For at least one goal in your bulleted list, add a possible challenge or complication of this goal. To do so, add the text on the line underneath the goal, use tab to indent, and add a `+` before the text. 

###

In the Terminal, run `grep -F "+" about.Rmd`. Copy and paste the result below. 

```{r text-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

To create a numbered list, use numbers followed by periods, i.e. 1., instead of asterisks. Sub-items for numbered lists are created in the same way as they are for bulleted lists. 
### Exercise 8 

Oftentimes you want to wrap text before the default margin. For example, add Preceptor's common saying: '"This is data science"' (include the double quotes, not the single quotes). Then on the next line add "~ Preceptor" (do not include the quotes). Knit the Rmd. 

###

Run `grep -F "-" docs/about.html`. Copy and paste the result. 

```{r text-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### 

This will not work. The quote and its source will be on the same line. 

### Exercise 9 

To create a manual line break, add two spaces after the final quote in '"This is data science"'. Knit the rmd. 

###

In the Terminal, run `grep -F "data science" docs/about.html`. Copy and paste the result. 

```{r text-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

###

Note that the tilde will disappear and create an indent. This is an automatic feature of an R Markdown document. To print the tilde in the knitted document, enclose it within single quotes. 

### Exercise 10 

Let's create text which is also a hyperlink to the bootcamp website. Enclose the text "Kane's Free High School Data Science Bootcamp" in brackets `[]`. Then, without a space intervening, add parentheses `()` which enclose a link to the bootcamp website: https://bootcamp.davidkane.info. Knit the Rmd. 

###

In the Terminal, run `grep info docs/about.html`. Copy and paste the result. 

```{r text-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    options = list(nrows = 3))
```

### Exercise 11

Go to the Build Tab, click "Build Website". Check to make the about page has been updated. 

###

Go the Git tab, committing and pushing your new changes to Github. Include a descriptive commit message, e.g. "Added info to about page".

###

After pushing, your new changes will be automatically reflected on your Github Pages site. This should take fewer than three minutes. 

## Adding a new Page
###

## Using a .RDS
###

## Adding Images and Tables
###

## Adding Citations
###


## Submit

```{r context = "setup"}
submission_ui
```

```{r context = "server"}
submission_server()
```

