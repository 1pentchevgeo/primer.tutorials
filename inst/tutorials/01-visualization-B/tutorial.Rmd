---
title: "Visualization B"
tutorial:
  id: "visualization-b"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: "Chapter 1 Tutorial Part B"
---

```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(tidyverse)
library(primer.data)
library(learnr)

knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 
```


## Information
###

```{r information}
quiz(caption = "",
  question_text(
    "Name:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL),
  question_text(
    "Email:",
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL))
```



## The `tidyverse`
###

Let's practice using`tidyverse` functions that help manipulate datasets.

### Exercise 1

Use `glimpse()` to look at the data set `cces`.

```{r tv-1, exercise = TRUE}

```

### Exercise 2

Start your code with `cces`. Use the pipe operator `%>%` to add the function `filter()`. Within `filter()` use the argument to select the rows where `state` is equal to "Massachusetts"`.

```{r tv-2, exercise = TRUE}


```

```{r tv-2-hint, eval = FALSE}
cces %>% 
  filter(state == "...")
```

### Exercise 3

Great. Let's now extend our code within `filter()` to include data where `state` is "Massachusetts" AND where `ideology` is "Liberal". 

```{r tv-3, exercise = TRUE}


```

```{r tv-3-hint, eval = FALSE}
cces %>% 
  filter(state == "..." &
           ideology == "...")
```

### Exercise 4

Let's now use `select()` to look at specific data columns of the `cces` dataset. Start your code with `cces`. Use the pipe operator `%>% `to add the function `select()`. Within `select()`, grab the variables `gender` and `age`.

```{r tv-4, exercise = TRUE}

```

```{r tv-4-hint, eval = FALSE}
cces %>% 
  select(gender, age)
```

### Exercise 5

Let's organize the values of `age` in ascending order. Extend your code with `%>%` to add the function `arrange()`

```{r tv-5, exercise = TRUE }

```

```{r tv-5-hint, eval = FALSE}
cces %>% 
  select(gender, age) %>% 
  arrange()
```

### Exercise 6

Let's now try using `select()` to grab all the columns between `gender` and `education` using the `:` operator. 

```{r tv-6, exercise = TRUE}

```

```{r tv-6-hint-1, eval = FALSE}
Within select(), place the : operator between gender and education. 
```

```{r tv-6-hint-2, eval = FALSE}
cces %>% 
  select(...:...)
```

### Exercise 7

Let's say we wanted to use data from the 200 youngest black males in the `nhanes` dataset. We first would `select()` the variables we want to focus on, in this case `height`, `weight`, `age`, `race`, and `gender`. Try doing this below.

```{r tv-7, exercise = TRUE}

```

```{r tv-7-hint, eval = FALSE}
nhanes %>% 
  select(...)
```

### Exercise 8

Extend your code with `%>% `to add the function `filter()` to filter data where `race` is equal to "Black" AND `gender` is equal to "Male"`.

```{r tv-8, exercise = TRUE}


```

```{r tv-8-hint, eval = FALSE}
nhanes %>% 
  ... %>% 
  filter(race == "..." &
           gender == "...")
```

### Exercise 9

Great! So what now? Well, we narrowed our data to black males. How can we narrow it to the youngest black males? To do so, use `arrange()` with the argument `desc(age)`. Do this below:

```{r tv-9, exercise = TRUE}


```

```{r tv-9-hint, eval = FALSE}
nhanes %>% 
  ... %>% 
  ... %>% 
  arrange(desc(...))
```

### Exercise 10

Nice! Because of the way we arranged the data, the 200 rows with the lowest age value would be the first 200. Use `slice()` to isolate the 200 rows with the lowest age value. 

```{r tv-10, exercise = TRUE}


```

```{r tv-10-hint-1, eval = FALSE}
Within `slice()` use the argument 1:200
```

### Exercise 11

Let's create a new variable in the `mpg` tibble. Start your code with `mpg`. Use `mutate()` to create a new variable called `midsize`. Set  `midsize` to an `if_else()` statement where it it returns TRUE when the class of the car is "midsize" and FALSE otherwise. 

```{r tv-11, exercise = TRUE}

```

```{r tv-11-hint, eval = FALSE}
mpg %>% 
  mutate(... = ifelse(class == "midsize", TRUE, FALSE))
```

### Exercise 12

Let's now calculate the mean value of `age` in the `nhanes` dataset. Start your code with `nhanes` and use `%>%` to add `summarize()`. Within `summarize()`, use `mean()`. The first argument to `mean()` should be `age`. The second argument should be `na.rm = TRUE` to remove all NA values.
  
```{r tv-12, exercise = TRUE}

```

```{r tv-12-hint, eval = FALSE}
nhanes %>% 
  summarize(... = mean(...), na.rm = TRUE)
```

### Exercise 13

We just calculated the average age in our dataset. Let's now calculate the average age for each gender. Copy and paste your code from above and use `%>% ` to add `group_by()`. Use `group_by()` with the argument `gender`.

```{r tv-13, exercise = TRUE}

```

```{r tv-13-hint, eval = FALSE}
nhanes %>% 
  group_by(...) %>% 
  summarize(mean = mean(age, 
                        na.rm = ...))
```
